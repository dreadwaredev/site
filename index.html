<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Dots&display=swap"
          rel="stylesheet">
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
    <title>DREADWARE DEV</title>
</head>
<body>
    <center><h1 id="title">DREADWARE</h1></center>
    <div class="grid">
        <div id="posts"><article class="post" id="2025-12-03-milestone-1">
    <header>
        <center><h1 class="post-title">Milestone 1</h1></center>
        <time datetime="2025-12-03" class="post-date">December 3, 2025</time>
    </header>
    <hr />
    <div class="post-content"><h2 id="first-steps">First Steps</h2>
<p>Earlier, I told you why I’m insane enough to write my own code editor and explained my approach. Today, I'm sharing some of the code. It’s starting to feel like I might actually get this thing to work.</p>
<p>First, I had to setup a compiler. Since I recently tried and failed to get the Microsoft compiler working, I tried GCC next. This was actually a great experience! I managed to find a version of GCC that works with Windows 7 (GCC 14.2.0) and grabbed it from <a href="https://winlibs.com/#download-release">winlibs.com</a>. I opted for the version <em>without</em> LLVM/Clang/LLD/LLDB, downloaded the zip, extracted the binaries to a folder on my machine, and added it to my PATH. I could successfully hit it with <code>gcc --version</code>. This is how software should be distributed! Why can't Microsoft distribute their compiler this way?</p>
<p>I then wrote a tiny C program:</p>
<div class="code-wrapper"><pre><code class="language-c">int main(int argc, char* argv[]) {
	return 0;
}
</code></pre></div>
<p>...and a Windows batch file to automate compilation:</p>
<div class="code-wrapper"><pre><code class="language-bat">@echo off
setlocal

set FLAGS=-Wall -Wextra -Werror -std=c99

echo.
if &quot;%~1&quot;==&quot;debug&quot; (
	echo [DEBUG BUILD]
	set FLAGS=-Og -g -DINTERNAL_BUILD %FLAGS%
	set OUTPUT_DIR=.\bin\debug\
) else (
	echo [RELEASE BUILD]
	set FLAGS=-O2 -s %FLAGS%
	set OUTPUT_DIR=.\bin\release\
)
if not exist &quot;%OUTPUT_DIR%&quot; (
	mkdir &quot;%OUTPUT_DIR%&quot;
)

echo Invoking cGCC...
pushd %OUTPUT_DIR%
gcc %FLAGS% -o de.exe ..\..\src\dreadedit.c
if %ERRORLEVEL% equ 0 (
	echo Build Success
) else (
	echo Build Failure
)
popd

echo Cleaning temp files...
pushd &quot;%OUTPUT_DIR%&quot;
del *.o *.obj 2&gt; NUL
popd

endlocal
exit /b 0
</code></pre></div>
<p>This let me use <code>build</code> or <code>build debug</code> commands to build my executable.</p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Prereq: get a compiler installed and working</li>
</ul>
<p>The next step in my plan was to create and open a window. I found that win32 has some built-in functions for text rendering which I leveraged to present some hardcoded text:</p>
<p><a href="img/2025-02-12-01.png" target="_blank" rel="noopener noreferrer"><img src="img/2025-02-12-01.png" alt="milestone" //></a></p>
<p>At this point I had most of items 1 and 2 of my plan complete:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Win32 Window
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Message Loop</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Back Buffer + Blit</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Simple screen painting</li>
</ul>
</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Font + Text Rendering
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" /> Evaluate stb_truetype integration</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Render hardcoded text to screen</li>
</ul>
</li>
</ul>
<p>I skipped looking at stb_truetype since win32 has built-in text rendering. I may revisit it later.</p>
<p>Next up was handling input. I made a simple character buffer and added handling of <code>WM_KEYDOWN</code> and <code>WM_CHAR</code> messages to get some text into the buffer to prove that typing works:</p>
<div class="code-wrapper"><pre><code class="language-c">int position = 0;
char buffer[255];
void insert_character(char c) {
	buffer[position++] = c;
}
</code></pre></div>
<div class="code-wrapper"><pre><code class="language-c">TextOutA(hdc, 0, 0, buffer, length);
</code></pre></div>
<p>However, it wasn't drawing to the screen as I expected. I fired up <a href="https://remedybg.itch.io/remedybg">RemedyBG</a> and ran into a problem: breakpoints were not working. I suspected the debugger was not able to load the debug symbols, so I started to investigate.</p>
<p>I didn't see a .pdb generated, but GCC supposedly embeds debug stuff into the .exe itself, so I didn't think much of it. After reading, it seems RemedyBG requires the information within a .pdb to get breakpoints and variable inspection working. I looked to see if GCC could output a .pdb, and the answer was: yes it can! With <code>-g -gcodeview</code> flags it spits out a .pdb. However, RemedyBG was still not able to add breakpoints. I did some more reading, asked a few questions to an LLM, and discovered that GCC <em>can</em> output a .pdb, but the generated debug information is not sufficient for RemdyBG. I could find no obvious way to coerce GCC into providing what RemedyBG requires.</p>
<p>At this point I had a compiler that worked but no debugger, which was going to become an increasingly nasty problem for me. I looked at the <a href="https://github.com/EpicGamesExt/raddebugger/">RAD Debugger</a>, but from what I can tell it suffers from the same problems as RemedyBG without a valid Microsoft .pdb near the executable.</p>
<p>Luckily, my trusty LLM told me that <a href="https://clang.llvm.org/">Clang</a> is able to output a proper .pdb. My decision to download GCC without Clang now seemed foolish. I looked for a version of <a href="https://github.com/llvm/llvm-project/releases/tag/llvmorg-15.0.7">Clang for Windows 7</a>, downloaded <code>LLVM-15.0.7-win64.exe</code> and installed it.</p>
<p>This was the first time I've used Clang, so I wasn't sure what I was in for. I'm happy to say that going from GCC to Clang was pain free. I updated a couple lines in my .bat and Clang generated a .pdb that RemedyBG could use. After a single debug session I found that I was not calling <code>InvalidateRect(hwnd, NULL, TRUE);</code> in the right place, so I wasn't seeing text because Windows was not redrawing the graphics for me. Once I added that, I was in business!</p>
<h2 id="current-state">Current State</h2>
<p>Here is where I am today:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" /> Typing, Cursor and Gap Buffer
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Translate keystrokes to text</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" /> Insert and delete text</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" /> Blinking cursor</li>
</ul>
</li>
</ul>
<p>I'll dump my current .bat here for posterity:</p>
<div class="code-wrapper"><pre><code class="language-bat">@echo off
setlocal

set FLAGS=-Wall -Wextra -Werror -std=c99
set FLAGS=%FLAGS% -target x86_64-w64-windows-gnu -fuse-ld=lld
set FLAGS=%FLAGS% -lgdi32 -luser32 -mwindows

echo.
if &quot;%~1&quot;==&quot;debug&quot; (
	echo [DEBUG BUILD]
	set FLAGS=%FLAGS% -Og -g -gcodeview -Wl,--pdb=de.pdb -DINTERNAL_BUILD
	set OUTPUT_DIR=.\bin\debug\
) else (
	echo [RELEASE BUILD]
	set FLAGS=-O2 -s %COMPILER_FLAGS%
	set OUTPUT_DIR=.\bin\release\
)
if not exist &quot;%OUTPUT_DIR%&quot; (
	mkdir &quot;%OUTPUT_DIR%&quot;
)

echo Invoking compiler...
pushd %OUTPUT_DIR%
clang %FLAGS% -o de.exe ..\..\src\dreadedit.c
if %ERRORLEVEL% equ 0 (
	echo Build Success
) else (
	echo Build Failure
)
popd

echo Cleaning temp files...
pushd &quot;%OUTPUT_DIR%&quot;
del *.o *.obj 2&gt; NUL
popd

endlocal
exit /b 0
</code></pre></div>
<p>Here is what I have at the top of my .c file to handle GCC and Clang warnings, along with MSC since that is what I am accustomed to using:</p>
<div class="code-wrapper"><pre><code class="language-c">//////////////////////////////////////////////////////////////////////////////////////////
// COMPILER
//////////////////////////////////////////////////////////////////////////////////////////

#if defined(__GNUC__)
#   define COMPILER_GCC
#elif defined(__clang__)
#  define COMPILER_CLANG
#elif defined(_MSC_VER)
#   define COMPILER_MSC
#else
#   error compiler not supported
#endif

#if defined(COMPILER_GCC)
#  if defined(INTERNAL_BUILD)
#    pragma GCC diagnostic ignored &quot;-Wmissing-field-initializers&quot;
#    pragma GCC diagnostic ignored &quot;-Wunused-function&quot;
#    pragma GCC diagnostic ignored &quot;-Wunused-parameter&quot;
#    pragma GCC diagnostic ignored &quot;-Wunused-variable&quot;
#    pragma GCC diagnostic ignored &quot;-Wunused-but-set-variable&quot;
#  endif
#  define inline inline __attribute__((always_inline))
#elif defined(COMPILER_CLANG)
#  if defined(INTERNAL_BUILD)
#    pragma clang diagnostic ignored &quot;-Wmissing-field-initializers&quot;
#    pragma clang diagnostic ignored &quot;-Wunused-function&quot;
#    pragma clang diagnostic ignored &quot;-Wunused-parameter&quot;
#    pragma clang diagnostic ignored &quot;-Wunused-variable&quot;
#    pragma clang diagnostic ignored &quot;-Wunused-but-set-variable&quot;
#  endif
#  define inline inline __attribute__((always_inline))
#elif defined(COMPILER_MSC)
#  pragma warning(disable:4201) // nameless struct/union
#  if defined(INTERNAL_BUILD)
#    pragma warning(disable:4100) // unreferenced formal parameter
#    pragma warning(disable:4101) // unreferenced local variable
#    pragma warning(disable:4127) // conditional expression is constant
#    pragma warning(disable:4189) // local variable is initialized but not referenced
#    pragma warning(disable:4505) // unreferenced local function has been removed
#    pragma warning(disable:4702) // unreachable code
#  endif
#  define inline __forceinline
#endif

</code></pre></div>
<p>I also want to share how I am currently processing keystrokes. I use <code>WM_KEYDOWN</code> to filter some non-character keys that I will likely need in the future. I then let Windows translate the keystrokes for me and capture characters with <code>WM_CHAR</code> as seen here:</p>
<div class="code-wrapper"><pre><code class="language-c">#define COLOR_BACK RGB(0,0,0)
#define COLOR_TEXT RGB(255,255,255)

LRESULT CALLBACK
WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
	switch (uMsg) {
		case WM_DESTROY:
			PostQuitMessage(0);
			return 0;
		case WM_CLOSE:
			DestroyWindow(hwnd);
			return 0;
		case WM_PAINT: {
				PAINTSTRUCT ps;
				HDC hdc = BeginPaint(hwnd, &amp;ps);
				
				HBRUSH hBrush = CreateSolidBrush(COLOR_BACKGROUND);
				RECT rc;
				GetClientRect(hwnd, &amp;rc);
				FillRect(hdc, &amp;rc, hBrush);
				DeleteObject(hBrush);
	
				SetBkColor(hdc, COLOR_BACK);
				SetTextColor(hdc, COLOR_TEXT);
				u32 length = cstr_length(buffer);
				if (length &gt; 0) {
					TextOutA(hdc, 0, 0, buffer, length);
				}
				EndPaint(hwnd, &amp;ps);
			}
			return 0;
		case WM_KEYDOWN:
			switch (wParam) {
				case VK_LEFT:
				case VK_RIGHT:
				case VK_DOWN:
				case VK_UP:
				case VK_HOME:
				case VK_END:
				case VK_DELETE:
				case VK_BACK:
					break;
				case VK_ESCAPE:
					PostMessage(hwnd, WM_CLOSE, 0, 0);
					break;

			}
			return 0;
		case WM_LBUTTONDOWN:
			MessageBeep(MB_ICONINFORMATION);
			return 0;
		case WM_RBUTTONDOWN:
			MessageBeep(MB_ICONINFORMATION);
			return 0;
		case WM_CHAR:
			switch (wParam) {
				case VK_RETURN:
					break;
				case VK_TAB:
					break;
				case VK_BACK:
					break;
				default:
					if (wParam &gt;= 32 &amp;&amp; wParam != 127) {
						insert_character((char)wParam);
						InvalidateRect(hwnd, NULL, TRUE);
					}
			}
			break;
	}
	return DefWindowProc(hwnd, uMsg, wParam, lParam);
}
</code></pre></div>
</div>
</article><article class="post" id="2025-12-01-getting-started">
    <header>
        <center><h1 class="post-title">Getting Started</h1></center>
        <time datetime="2025-12-01" class="post-date">December 1, 2025</time>
    </header>
    <hr />
    <div class="post-content"><h2 id="motivation">Motivation</h2>
<p>In my last post, I described my frustration with modern software along with a desire to look back at the &quot;good ol' days&quot; of computing when software was simpler. Recently, simplicity in software is a guiding principal I've adopted, and that remains as one of the primary motivations for writing my own code editor. However, another important factor is that I really have no idea how these things work. There are some basic things that are obvious, but I have never entered the world of tool development or text editing, and I think having some hands-on experience would help me better apricate and understand software tools.</p>
<p>So I can summarize my motivations:</p>
<ul>
<li>Need for a simple code editor</li>
<li>Need for a code editor that works on an <em>air gapped</em> Windows 7 machine</li>
<li>Need to free myself from as many dependencies as possible to remain in control of my own destiny</li>
<li>Need to learn something new</li>
</ul>
<p>The motivations could also serve as goals for the project, and it's very likely that, by that measure, the project will fail. I will proceed, however. At the very least I will learn something new, which is my top priority. If I have to go back to using existing editors on Windows 11 it's not the end of the world, but I want to give this a try before accepting that fate.</p>
<p>The question I need to ask myself next is &quot;how can I get this done?&quot;</p>
<h2 id="software">Software</h2>
<h3 id="code-editor">Code Editor</h3>
<p>If I don't already have a code editor, how can I write the code for the editor? I'm going to start with notepad.exe. This might sound crazy, but it also serves as a milestone marker. I know that I can start using my own code editor to develop itself once I have the required feature parity with notepad.</p>
<h3 id="compiler">Compiler</h3>
<p>It's obvious, but in order to compile code into a useable program I need a compiler. I already went through great pain trying and failing to install Build Tools for Visual Studio on my Windows 7 machine, because it is offline. Even after creating the offline installer and manually deploying certificates, the installer does not function and no actionable error messages are written to the logs. I will try GCC next. I've used GCC for some embedded programming in the past, but not for Windows development. It looks like installing GCC on a machine without internet access is not difficult, but who can be sure? My success or failure will be noted in the next post.</p>
<h2 id="hardware">Hardware</h2>
<p>For transparency's sake, I will include the actual hardware I am using for my dev machine:</p>
<p>HP EliteDesk 800 G2 Mini (refurbished)</p>
<ul>
<li>Intel Core i5-6500T @ 2.5ghz</li>
<li>16gb DDR4 RAM</li>
<li>250gb HDD</li>
</ul>
<h2 id="the-plan">The Plan</h2>
<p>Before I start coding I think it's good to have a plan, even if the plan changes immediately and often. I know so little about how these things work that I expect this list to change dramatically. For now, these are the features I am looking at, roughly in order:</p>
<p>Prereq: get a compiler installed and working</p>
<ol>
<li>Win32 Window
<ol>
<li>Message Loop</li>
<li>Back Buffer + Blit</li>
<li>Simple screen painting</li>
</ol>
</li>
<li>Font + Text Rendering
<ol>
<li>Evaluate stb_truetype integration</li>
<li>Render hardcoded text to screen</li>
</ol>
</li>
<li>Typing, Cursor and Gap Buffer
<ol>
<li>Translate keystrokes to text</li>
<li>Insert and delete text</li>
<li>Blinking cursor</li>
</ol>
</li>
<li>File I/O
<ol>
<li>Open, Close and Save files to disc</li>
</ol>
</li>
<li>Code Navigation
<ol>
<li>Implement ability to search for, and jump to, text</li>
<li>Show line numbers</li>
</ol>
</li>
<li>Hotkeys
<ol>
<li>Copy, Cut, Paste</li>
<li>Support common code-related commands</li>
</ol>
</li>
<li>Multi-pane
<ol>
<li>Support having two files open at once</li>
<li>Support having the same file open twice with independent cursors</li>
</ol>
</li>
<li>External Process
<ol>
<li>Support running a BAT from a hotkey to compile code</li>
<li>Support debugger integration (jump to line)</li>
</ol>
</li>
<li>Color Themes
<ol>
<li>Support syntax highlighting</li>
<li>Support custom colors</li>
</ol>
</li>
</ol>
<p>Something I want to note is that I don't have a plan to add mouse support. I have always lived in a world where a mouse was available to navigate code and I think it's always held me back. I want to get to a point where my hands never leave the keyboard, but I lack the discipline to do it myself. This could be an opportunity to force myself to forego the mouse by simply not supporting it.</p>
<p>Once this post goes live I will begin to put my plan into action.</p>
</div>
</article><article class="post" id="2025-11-21-looking-back">
    <header>
        <center><h1 class="post-title">Looking Back</h1></center>
        <time datetime="2025-11-21" class="post-date">November 21, 2025</time>
    </header>
    <hr />
    <div class="post-content"><h2 id="the-past">The Past</h2>
<p>My very first home computer was a Windows 95 machine which crashed frequently (although <a href="https://x.com/MisterSpace3/status/1995362984605184270?s=20">this could have been a hardware issue</a> all along?). I upgraded to Windows ME which made things worse, but I was young and had time. I ended up learning a lot to play Diablo 2 without losing my hardcore character to lag or crashes. I can still vividly remember the horror of hearing &quot;<a href="https://www.youtube.com/watch?v=8gYEFASEvXg">Looking for Baal</a>&quot; as the screen stayed black, only to finally load in with my character dead on the ground. The internet was still in its infancy at the time; there was no AI, no Google. I just had to try stuff until it worked.</p>
<p>When I got to college I used Windows XP. The OS crashes were mostly gone. For my C++ course work, we were instructed to use an IDE called Quincy which was primitive by modern standards. It crashed all the time (but Windows XP didn't) and I learned the hard way that pressing CTRL+S every few seconds was essential. This is a habit I continue to this day, although most modern software autosaves. Even with all these problems, I don't ever remember feeling discouraged when it came to programming, or about computers in general. Maybe I was just a naive youth, but I think my enthusiasm endured because I was witnessing computer hardware and software make continual improvements every day.</p>
<h2 id="the-present">The Present</h2>
<p>Now it's 2025. I've been using Windows 11 and Visual Studio for a long time, on both professional and personal projects. I find myself frequently feeling discouraged whenever I sit down to program. Time is now far more scarce than when I was young and every minute that I waste with OS updates, incompatibilities, and slowness feels excruciating. It's frustrating and makes me want to quit. Modern software has become exceptionally over complicated and it sucks! Even <a href="https://x.com/WindowsLatest/status/1991952313217638540">opening a folder takes forever</a> on a modern gaming system! At least I'm <a href="https://x.com/ryanjfleury/status/1992373926509551765">not alone</a> <a href="https://x.com/Jonathan_Blow/status/1985114439805550952">in feeling</a> <a href="https://x.com/cmuratori/status/1949880554079605145">this way</a>.</p>
<p>To mitigate this, I started using tools that were built by people who actually care about time. I started using <a href="https://10xeditor.com/">10x Editor</a> and <a href="https://remedybg.itch.io/remedybg">RemedyBG</a> to make coding tolerable again. I use <a href="https://filepilot.tech/">File Pilot</a> to avoid the feeling of walking through tar with explorer.exe. But somehow, Windows 11 keeps getting worse and I keep noticing.</p>
<p><strong>I can still remember the days before things were so broken and complicated!</strong> So, instead of looking forward I started looking back.</p>
<blockquote>
<p>&quot;If you want to set off and go develop some grand new thing, you don't need millions of dollars of capitalization. You need enough pizza and Diet Coke to stick in your refrigerator, a cheap PC to work on, and the dedication to go through with it.&quot; - John Carmack</p>
</blockquote>
<p>Inspired by the numinous John Carmack quote above, I bought a cheap PC to serve as my primary programming machine and put Windows 10 LTSC on it. I briefly tried to install Linux but none of my attempts were successful. Some distros wouldn't even install on the hardware I was using. The ones that did install wouldn't boot. I actually blame Microsoft and Intel for this since I think many of the problems involve things like &quot;TPM&quot; or &quot;UEFI&quot; or whatever other complex BIOS junk that exists today. I admit that I do not have a deep understanding of chipset/BIOS minutia, and I have no interest in learning. I want to program, I don't want to be a systems admin.</p>
<p>I used that machine for about a year, and things were mostly good. However, LTSC still has an expiration date, and <a href="https://www.digitalcitizen.life/top-11-things-we-dont-about-windows-10/">Windows 10 is still not fun</a>. After a particularly depressing session, I thought hard about the last time I had a good experience with a computer. It was back when Windows 7 was in its prime. Windows 7 smoothed over many of the problems Vista introduced and mostly just got out of my way. It didn't have the modern Windows telemetry nightmare. It was stable. Software mostly worked. So I decided to try an experiment and give Windows 7 another try.</p>
<p>Immediately I discovered my machine wouldn't work because it was too new. The chipset is not supported by Windows 7 drivers. So I bought something old instead. The 10+ year old PC I bought has no wireless network adapter, which is excellent for me since putting this device online might destroy it. The software I use seems to still have support for Windows 7, even if unofficially. Unfortunately, 10x Editor does not render correctly which leaves me heartbroken.</p>
<h2 id="the-future">The Future</h2>
<p>So what can I do? I need an editor that respects me and my time, which narrows it down to very few. I used to use <a href="https://4coder.net/">4Coder</a>, but it's long since been discontinued. There is a <a href="https://github.com/4coder-community/4cc">community version</a>, so I gave that shot. Unfortunately, installing Build Tools for Visual Studio on an offline machine wouldn't work for me, even when using the fancy command line flags to create an offline installer. This leaves me concerned since I typically use Microsoft's compiler. I will try GCC to see if I have better luck, but for now I have no code editor and no compiler.</p>
<p>If I think about what I need in an editor, it's actually very little:</p>
<ul>
<li>manipulate text</li>
<li>copy and paste</li>
<li>support keyboard shortcuts</li>
<li>launch a .bat to compile my code when I press CTRL+B</li>
</ul>
<p>Syntax highlighting might be nice but isn't required. I just want to type, compile, and run programs.</p>
<p>The <a href="https://focus-editor.dev/">Focus editor</a> sounds great, but doesn't run on Windows 7. I'm not cool enough or smart enough to learn emacs. Notepad is actually pretty close, but doesn't fulfil my short-list of needs.</p>
<p>I think I'll just write my own.</p>
</div>
</article></div>
        <aside class="toc">
            <center><strong>Table of Contents</strong></center>
            <hr />
            <ul class="toc-list">
                <li><a href="#title">[Top]</a></li>
                <li><a href="#2025-12-03-milestone-1">Milestone 1</a></li><li><a href="#2025-12-01-getting-started">Getting Started</a></li><li><a href="#2025-11-21-looking-back">Looking Back</a></li>
            </ul>
        </aside>
    </div>
</body>
</html>
